<title>Sensor Temperature</title>
<div id="placeholder" style="width:600px;height:300px"></div>

<script type="text/javascript">
io.socket.get('/temperature/subscribe', function(data, jwr) {

    var datanya = [{label:"cumi",data:[]}];

    io.socket.on('temperature', function(entry) {
        tanggal = new Date(entry.createdAt);
        if (datanya[0].data.length >15) {
            datanya[0].data.shift();
        }
        datanya[0].data.push( [ tanggal.getSeconds(), parseInt(entry.value)  ]  )

        var options = {
            xaxis: {
                tickDecimals: 0
            },
            yaxis: {
                min: 0
            },
            legend: {
                show:false
            },
            selection: {
                mode: "x"
            }
        };

        $.plot($("#placeholder"),  datanya , options);
    })
})
</script>
